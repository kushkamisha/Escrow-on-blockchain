<!DOCTYPE html>
<html>
  <head>
    <title>Buy a House</title>
    <meta charset="UTF-8" />
  </head>
  <body>
    <script src="https://unpkg.com/@metamask/detect-provider/dist/detect-provider.min.js"></script>
    <script type="text/javascript">
      async function initialize(provider) {
        console.log(provider.isConnected())
        const accounts = await provider.request({ method: 'eth_accounts' })
        const balance = await provider.request({ method: 'eth_getBalance', params: [accounts[0]] })
        console.log({ balance })
      }

      window.addEventListener('load', async () => {
        const provider = await window.detectEthereumProvider()

        if (provider) {
          provider.autoRefreshOnNetworkChange = false
          initialize(provider)
        } else {
          console.error('Please install MetaMask!')
        }
      })
    </script>
  </body>
</html>
